@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Library Color Palette - Warm, Nostalgic */
    --background: 30 25% 12%;
    --foreground: 40 20% 90%;

    --card: 30 20% 16%;
    --card-foreground: 40 20% 88%;

    --popover: 30 22% 14%;
    --popover-foreground: 40 20% 90%;

    /* Warm amber primary */
    --primary: 38 70% 50%;
    --primary-foreground: 30 25% 10%;

    /* Muted library wood tones */
    --secondary: 30 18% 22%;
    --secondary-foreground: 40 15% 80%;

    --muted: 30 15% 20%;
    --muted-foreground: 35 12% 55%;

    /* Warm accent glow */
    --accent: 42 80% 55%;
    --accent-foreground: 30 25% 10%;

    --destructive: 0 62% 45%;
    --destructive-foreground: 0 0% 98%;

    --border: 30 15% 25%;
    --input: 30 18% 20%;
    --ring: 38 60% 45%;

    --radius: 0.375rem;

    /* Library-specific tokens */
    --library-deep: 25 30% 8%;
    --library-wood: 28 35% 18%;
    --library-wood-light: 32 30% 28%;
    --library-amber: 38 75% 45%;
    --library-amber-glow: 40 80% 60%;
    --library-cream: 40 30% 92%;
    --library-parchment: 42 35% 88%;
    --library-dust: 38 40% 70%;
    
    /* Desk tones */
    --desk-surface: 30 28% 35%;
    --desk-highlight: 35 25% 45%;
    
    /* Crystal guide */
    --crystal-glow: 45 90% 70%;
    --crystal-core: 48 85% 85%;

    /* Time-based lighting variants */
    --light-day: 45 60% 75%;
    --light-afternoon: 38 70% 55%;
    --light-evening: 28 50% 35%;

    /* Shadows and depth */
    --shadow-soft: 0 4px 20px -4px hsl(25 40% 5% / 0.5);
    --shadow-deep: 0 8px 32px -8px hsl(25 50% 3% / 0.7);
    --shadow-glow: 0 0 40px hsl(var(--library-amber) / 0.3);

    /* Sidebar */
    --sidebar-background: 28 28% 12%;
    --sidebar-foreground: 40 18% 75%;
    --sidebar-primary: 38 65% 50%;
    --sidebar-primary-foreground: 30 25% 10%;
    --sidebar-accent: 32 25% 20%;
    --sidebar-accent-foreground: 40 20% 85%;
    --sidebar-border: 30 20% 18%;
    --sidebar-ring: 38 60% 45%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Noto Serif KR', serif;
  }
}

@layer components {
  /* Library atmosphere layers */
  .library-atmosphere {
    position: relative;
    background: linear-gradient(
      180deg,
      hsl(var(--library-deep)) 0%,
      hsl(var(--background)) 50%,
      hsl(var(--library-wood) / 0.8) 100%
    );
  }

  /* Bookshelf silhouette overlay */
  .bookshelf-overlay {
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: 
      /* Left bookshelf depth */
      linear-gradient(90deg, hsl(var(--library-deep) / 0.9) 0%, transparent 15%),
      /* Right bookshelf depth */
      linear-gradient(-90deg, hsl(var(--library-deep) / 0.9) 0%, transparent 15%),
      /* Top shadow */
      linear-gradient(180deg, hsl(var(--library-deep) / 0.6) 0%, transparent 20%);
  }

  /* Parchment surface */
  .parchment {
    background: linear-gradient(
      135deg,
      hsl(var(--library-parchment)) 0%,
      hsl(var(--library-cream)) 50%,
      hsl(var(--library-parchment) / 0.95) 100%
    );
    box-shadow: 
      0 2px 8px hsl(25 40% 10% / 0.2),
      0 0 1px hsl(25 30% 20% / 0.3),
      inset 0 1px 0 hsl(45 40% 95% / 0.5);
  }

  /* Wooden desk surface */
  .desk-surface {
    background: linear-gradient(
      180deg,
      hsl(var(--desk-highlight)) 0%,
      hsl(var(--desk-surface)) 30%,
      hsl(var(--library-wood)) 100%
    );
    box-shadow: 
      inset 0 2px 4px hsl(25 30% 50% / 0.2),
      0 -4px 16px hsl(25 40% 8% / 0.5);
  }

  /* Book spine styles */
  .book-spine {
    @apply transition-all duration-300 ease-out;
    background: linear-gradient(
      90deg,
      hsl(var(--library-wood)) 0%,
      hsl(var(--library-wood-light)) 50%,
      hsl(var(--library-wood)) 100%
    );
  }

  .book-spine:hover {
    transform: translateX(8px);
    box-shadow: var(--shadow-glow);
  }

  /* Crystal guide glow */
  .crystal-guide {
    background: radial-gradient(
      circle,
      hsl(var(--crystal-core)) 0%,
      hsl(var(--crystal-glow)) 40%,
      transparent 70%
    );
    animation: crystal-pulse 2s ease-in-out infinite;
  }

  @keyframes crystal-pulse {
    0%, 100% { opacity: 0.6; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.1); }
  }

  /* Floating dust particles */
  .dust-particle {
    position: absolute;
    width: 2px;
    height: 2px;
    background: hsl(var(--library-dust) / 0.4);
    border-radius: 50%;
    animation: dust-float linear infinite;
  }

  @keyframes dust-float {
    0% {
      transform: translateY(100vh) translateX(0);
      opacity: 0;
    }
    10% {
      opacity: 0.6;
    }
    90% {
      opacity: 0.4;
    }
    100% {
      transform: translateY(-20px) translateX(20px);
      opacity: 0;
    }
  }

  /* Light ray animation */
  .light-ray {
    position: absolute;
    background: linear-gradient(
      180deg,
      hsl(var(--library-amber-glow) / 0.15) 0%,
      hsl(var(--library-amber-glow) / 0.05) 50%,
      transparent 100%
    );
    animation: light-sway 8s ease-in-out infinite;
  }

  @keyframes light-sway {
    0%, 100% { transform: skewX(-2deg) translateX(0); opacity: 0.7; }
    50% { transform: skewX(2deg) translateX(10px); opacity: 1; }
  }

  /* Chapter divider */
  .chapter-divider {
    @apply relative py-8;
  }

  .chapter-divider::before {
    content: '';
    @apply absolute left-1/2 -translate-x-1/2 w-32 h-px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      hsl(var(--library-wood-light)) 50%,
      transparent 100%
    );
  }

  /* Time-based lighting classes */
  .time-day {
    --current-light: var(--light-day);
  }

  .time-afternoon {
    --current-light: var(--light-afternoon);
  }

  .time-evening {
    --current-light: var(--light-evening);
  }
}

@layer utilities {
  .text-library {
    color: hsl(var(--library-cream));
  }

  .text-library-muted {
    color: hsl(var(--library-dust));
  }

  .bg-library-deep {
    background-color: hsl(var(--library-deep));
  }

  .glow-amber {
    box-shadow: 0 0 20px hsl(var(--library-amber) / 0.4);
  }

  .glow-crystal {
    box-shadow: 0 0 30px hsl(var(--crystal-glow) / 0.6);
  }
}
